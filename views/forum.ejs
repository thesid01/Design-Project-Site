<%- include partials/header.ejs %>

<div class="jumbotron z-depth-0">
    <h2 class="display-4">Top Stories!</h2>
    <p class="lead">Top Stories by Users who have experienced the product.</p>
    <hr class="my-4">
    <p>Wanna Post Yours Just Sign In! and start spreding your love for our Product</p>
</div>

<div class="modal fade" id="newstory" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content light-blue">
      <div class="modal-header pastel-green text-center">
        <h4 class="modal-title w-100 font-weight-bold">Write Your Story</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body mx-3">
            <i class="fas fa-lg fa-user prefix grey-text"></i>
            <input type="text" id="name" placeholder="Name" class="form-control validate m-2">

            <i class="fas fa-lg fa-heart prefix grey-text"></i>
            <input type="text" id="title"  placeholder="Title" class="form-control validate m-2">

            <i class="fas fa-lg fa-pencil-alt prefix grey-text"></i>
            <textarea type="text" id="story" default="I like Casa Because" class="md-textarea form-control m-2" rows="4">I like Casa. Because</textarea>

            <i class="fas  fa-star prefix grey-text" ></i>

        </div>
        <div class="modal-footer d-flex justify-content-center">
            <button class="btn btn-unique" data-dismiss="modal" onclick="postStory()" >Send <i class="fas fa-paper-plane-o ml-1"></i></button>
        </div>
    </div>
  </div>
</div>

<div class="container">
    <div class="row">
        <div class="col">
            <button class="btn pastel-green float-right z-depth-0 text-dark" data-target="#newstory" data-toggle="modal"> Start new Story</button>
        </div>
    </div>
</div>

<div class="container-fluid p-md-3">

    <% for(var i=0; i < story.length; i++) { %>
    <div class="row mb-2">
        <div class="col">
            <div class=" mx-1 mt-2">
                <% if(i%2==0){%>
                    <div class="note note-primary pastel-green">
                <%}else{%>
                    <div class="note note-secondary light-blue">
                <%}%>
                    <div class="h2">
                        <%=story[i].title %>
                    </div>
                    <!-- Full Height Modal Right -->
                    <div class="modal fade bottom"  id="story<%=i%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel<%=i%>" aria-hidden="true">

                        <!-- Add class .modal-full-height and then add class .modal-right (or other classes from list above) to set a position to the modal -->
                        <div class="modal-dialog modal-full-height modal-bottom" role="document">


                            <div class="modal-content light-blue">
                                <div class="modal-header pastel-green">
                                <h4 class="modal-title w-100" id="myModalLabel"><%=story[i].title %></h4>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                </div>
                                <div class="modal-body">
                                    <p><%=story[i].content %></p>
                                    <hr>
                                    <p>
                                        <i class="fas fa-star"></i></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i>

                                        - By <font class="text-danger"><%=story[i].name %></font>  <font class="text-secondary"><%=story[i].date %></font>
                                    </p>
                                </div>
                                <div class="modal-footer justify-content-center">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Full Height Modal Right -->
                        
                    <div class=" pl-2 col-12 col-md-6">
                        <p class="font-weight-light">
                            <% if(story[i].content.length<150) {%>
                                    <%=story[i].content %></p>
                            <%}else{%>
                                <%=story[i].content.substring(0,150) %>
                                
                                <a class="font-weight-bold" data-toggle="modal" data-target="#story<%=i%>">Read More...</a>
                        </p>
                            <%}%>
                            
                        <%= story[i].Rating %>
                        <i class="fas fa-star"></i></i><i class="fas fa-star-half-alt"></i><i class="far fa-star"></i>

                          - By <font class="text-danger"><%=story[i].name %></font>  <font class="text-secondary"><%=story[i].date %></font>
                    </div>
                   
                </div>
            </div>
        </div>
    </div>
    <% } %>
</div>
    


<%- include partials/footer.ejs %>